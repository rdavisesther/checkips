<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>IP Provider Checker</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(135deg,#1e3c72,#2a5298);
}

.container{
    max-width:1100px;
    margin:50px auto;
    background:#fff;
    padding:30px;
    border-radius:14px;
    box-shadow:0 15px 40px rgba(0,0,0,.25);
}

h1{
    margin:0 0 10px;
    font-size:28px;
}

p{
    color:#555;
    margin-bottom:15px;
}

textarea{
    width:100%;
    height:160px;
    padding:12px;
    border-radius:10px;
    border:1px solid #ddd;
    resize:vertical;
    font-size:14px;
    outline:none;
}

textarea:focus{
    border-color:#2563eb;
    box-shadow:0 0 0 3px rgba(37,99,235,.15);
}

.actions{
    margin-top:15px;
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
}

button{
    padding:10px 20px;
    background:#2563eb;
    color:#fff;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}

button:hover{
    background:#1d4ed8;
}

.btn-secondary{
    display:inline-block;
    padding:10px 20px;
    background:#0f172a;
    color:#fff;
    border-radius:8px;
    text-decoration:none;
    font-weight:bold;
}

.btn-secondary:hover{
    opacity:.9;
}

.hint{
    font-size:13px;
    color:#64748b;
}

.alert{
    margin-top:15px;
    padding:12px;
    border-radius:10px;
    background:#fef2f2;
    border:1px solid #fecaca;
    color:#991b1b;
    font-weight:bold;
}

table{
    width:100%;
    margin-top:25px;
    border-collapse:collapse;
    border-radius:10px;
    overflow:hidden;
}

th{
    background:#0f172a;
    color:#fff;
    padding:12px;
    font-size:14px;
    text-align:left;
}

td{
    padding:10px;
    border-bottom:1px solid #eee;
    font-size:13px;
}

tr:hover td{
    background:#f1f5f9;
}

.success{
    color:#166534;
    font-weight:bold;
}

.fail{
    color:#b91c1c;
    font-weight:bold;
}

.footer{
    margin-top:30px;
    text-align:center;
    font-size:13px;
    color:#64748b;
}

.footer b{
    color:#111;
}
</style>
</head>

<body>

<div class="container">
    <h1>IP Provider Checker</h1>
    <p>Paste IP addresses (one per line)</p>

    <form method="post">
        <textarea name="ips" placeholder="8.8.8.8&#10;1.1.1.1">{{ raw_ips }}</textarea>

        <div class="actions">
            <button type="submit">Check</button>

            {% if data and data|length > 0 %}
                <a class="btn-secondary" href="/download">Download CSV</a>
            {% endif %}

            <div class="hint">Tip: You can paste comma-separated IPs too.</div>
        </div>
    </form>

    {% if error %}
        <div class="alert">{{ error }}</div>
    {% endif %}

    {% if data and data|length > 0 %}
    <table>
        <tr>
            <th>IP</th>
            <th>Status</th>
            <th>ISP</th>
            <th>Organization</th>
            <th>ASN</th>
            <th>Country</th>
            <th>Region</th>
            <th>City</th>
            <th>Message</th>
        </tr>

        {% for r in data %}
        <tr>
            <td>{{ r.query }}</td>
            <td>
                {% if r.status == "success" %}
                    <span class="success">Success</span>
                {% else %}
                    <span class="fail">Fail</span>
                {% endif %}
            </td>
            <td>{{ r.isp }}</td>
            <td>{{ r.org }}</td>
            <td>{{ r.as }}</td>
            <td>{{ r.country }}</td>
            <td>{{ r.regionName }}</td>
            <td>{{ r.city }}</td>
            <td>{{ r.message }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}

    <div class="footer">
        @By <b>WMN-3</b>
    </div>

</div>

</body>
</html>
